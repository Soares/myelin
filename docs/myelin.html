<!DOCTYPE html>  <html> <head>   <title>myelin.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               myelin.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Save a reference to the global object</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">root = </span><span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Save a reference to the current myelin object</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">previousMyelin = </span><span class="nx">root</span><span class="p">.</span><span class="nx">myelin</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Create the myelin object in the global namespace</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">if</span> <span class="k">typeof</span> <span class="nx">exports</span> <span class="o">isnt</span> <span class="s1">&#39;undefined&#39;</span> <span class="k">then</span> <span class="nv">myelin = </span><span class="nx">exports</span>
<span class="k">else</span> <span class="nv">myelin = root.myelin = </span><span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>require underscore, if we're on the server, and if it's not already present.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">_ = </span><span class="nx">root</span><span class="p">.</span><span class="nx">_</span>
<span class="k">if</span> <span class="o">not</span> <span class="nx">_</span> <span class="o">and</span> <span class="nx">require</span><span class="o">?</span> <span class="k">then</span> <span class="nv">_ = </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;underscore&#39;</span><span class="p">).</span><span class="nx">_</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>require backbone, if we're on the server, and it's not alraedy present.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Backbone = </span><span class="nx">root</span><span class="p">.</span><span class="nx">Backbone</span>
<span class="k">if</span> <span class="o">not</span> <span class="nx">Backbone</span> <span class="o">and</span> <span class="nx">require</span><span class="o">?</span> <span class="k">then</span> <span class="nv">Backbone = </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;backbone&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>for myelin's purposes, jQuery or Zepto owns the $ variable</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">$ = </span><span class="nx">root</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">or</span> <span class="nx">root</span><span class="p">.</span><span class="nx">Zepto</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>runs myelin in <strong>noConflict</strong> mode, returning the <code>myelin</code> variable
to its previous owner. Returns a reference to this <code>myelin</code> object.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">myelin.noConflict = </span><span class="o">-&gt;</span>
    <span class="nv">root.myelin = </span><span class="nx">previousMyelin</span>
    <span class="k">return</span> <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>A list of events that, placed at the beginning of selectors, will be
recognized as events and not part of the selector.
myelin whitelists events instead of blacklisting tags to that you can include
weird tags from non-html documents such as SVG or custom XML.
Event class names (such as keyUp.myEvent) are recognized so long as the part
before the dot is in myelin.events.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">myelin.events = </span><span class="p">[</span>
    <span class="s1">&#39;blur&#39;</span><span class="p">,</span> <span class="s1">&#39;focus&#39;</span><span class="p">,</span> <span class="s1">&#39;focusin&#39;</span><span class="p">,</span> <span class="s1">&#39;focusout&#39;</span><span class="p">,</span> <span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="s1">&#39;resize&#39;</span><span class="p">,</span> <span class="s1">&#39;scroll&#39;</span>
    <span class="s1">&#39;unload&#39;</span><span class="p">,</span> <span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="s1">&#39;dblclick&#39;</span><span class="p">,</span> <span class="s1">&#39;mousedown&#39;</span><span class="p">,</span> <span class="s1">&#39;mouseup&#39;</span><span class="p">,</span> <span class="s1">&#39;mousemove&#39;</span>
    <span class="s1">&#39;mouseover&#39;</span><span class="p">,</span> <span class="s1">&#39;mouseout&#39;</span><span class="p">,</span> <span class="s1">&#39;mouseenter&#39;</span><span class="p">,</span> <span class="s1">&#39;mouseleave&#39;</span><span class="p">,</span> <span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="s1">&#39;select&#39;</span>
    <span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="s1">&#39;keypress&#39;</span><span class="p">,</span> <span class="s1">&#39;keyup&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span>
<span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>A class that handles all interaction between the DOM and the Model.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Handler</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>For convenience, the constructor can take an 'event' option which, if
present, overrides domEvent.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">constructor: </span><span class="nf">(options) -&gt;</span> <span class="k">if</span> <span class="nx">options</span><span class="o">?</span><span class="p">.</span><span class="nx">event</span><span class="o">?</span> <span class="k">then</span> <span class="vi">@domEvent = </span><span class="nx">options</span><span class="p">.</span><span class="nx">event</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Get the value from the DOM element</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">get: </span><span class="nf">(el) -&gt;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Clean the value for sending to the model</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">clean: </span><span class="nf">(value) -&gt;</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Prepare the model's value for display</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">render: </span><span class="nf">(value) -&gt;</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Set the model's value on the DOM element</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">set: </span><span class="nf">(el, value) -&gt;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">html</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>The event to listen for on the DOM element, or falsy if the model does not
listen to the DOM</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">domEvent: </span><span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>The event to listen for on the model, or falsy if the DOM does not listen
to the model</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">modelEvent: </span><span class="nf">(attribute) -&gt;</span> <span class="s2">&quot;change:#{attribute}&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Whether or not the default DOM event should be stifled</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">preventDefault: </span><span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>A handler that gets and sets using jQuery .val()</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Input</span> <span class="k">extends</span> <span class="nx">Handler</span>
    <span class="nv">domEvent: </span><span class="s1">&#39;change&#39;</span>
    <span class="nv">get: </span><span class="nf">(el) -&gt;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span>
    <span class="nv">set: </span><span class="nf">(el, value) -&gt;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">val</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>An input handler that syncs on keyup</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">ImmediateInput</span> <span class="k">extends</span> <span class="nx">Input</span>
    <span class="nv">domEvent: </span><span class="s1">&#39;keyup&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>An Input handler that responds to click events and ignores the model
The common use pattern for buttons is to have a number of buttons with
different values, and clicking each button sets that button's value on the
model. As such, buttons must ignore changes on the model, or all of the
buttons will sync to the model the moment one of them is clicked.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Button</span> <span class="k">extends</span> <span class="nx">Input</span>
    <span class="nv">domEvent: </span><span class="s1">&#39;click&#39;</span>
    <span class="nv">modelEvent: </span><span class="kc">false</span>
    <span class="nv">get: </span><span class="nf">(el) -&gt;</span>
        <span class="k">if</span> <span class="nx">el</span><span class="p">.</span><span class="o">is</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">)</span> <span class="k">then</span> <span class="nx">el</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span> <span class="k">else</span> <span class="nx">el</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span>
    <span class="nv">set: </span><span class="nf">(el, value) -&gt;</span>
        <span class="k">if</span> <span class="nx">el</span><span class="p">.</span><span class="o">is</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">)</span> <span class="k">then</span> <span class="nx">el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="k">else</span> <span class="nx">el</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>An Input handler for submit buttons. It works just like Button, but also
prevents the default DOM event, which would submit a form.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Submit</span> <span class="k">extends</span> <span class="nx">Button</span>
    <span class="nv">preventDefault: </span><span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>An Input button for checkboxes. It <code>get</code>s a boolean value and <code>set</code>s the
checkbox's "checked" attribute.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Checkbox</span> <span class="k">extends</span> <span class="nx">Input</span>
    <span class="nv">get: </span><span class="nf">(el) -&gt;</span> <span class="nx">el</span><span class="p">.</span><span class="o">is</span> <span class="s1">&#39;:checked&#39;</span>
    <span class="nv">set: </span><span class="nf">(el, value) -&gt;</span>
        <span class="k">if</span> <span class="nx">value</span> <span class="k">then</span> <span class="nx">el</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;checked&#39;</span><span class="p">,</span> <span class="s1">&#39;checked&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="nx">el</span><span class="p">.</span><span class="nx">removeAttr</span> <span class="s1">&#39;checked&#39;</span>
    <span class="nv">clean: </span><span class="nb">Boolean</span>
    <span class="nv">render: </span><span class="nb">Boolean</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>An Input handler for radio fields. For this axon, <code>el</code> will be a collection of
elements in the radio set. <code>get</code> will return the value of the checked field,
and <code>set</code> will cause only the field with the matching value to be checked.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Radio</span> <span class="k">extends</span> <span class="nx">Input</span>
    <span class="nv">get: </span><span class="nf">(el) -&gt;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:checked&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
    <span class="nv">set: </span><span class="nf">(el, value) -&gt;</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">removeAttr</span> <span class="s1">&#39;checked&#39;</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;[value=#{value}]&quot;</span><span class="p">).</span><span class="nx">attr</span> <span class="s1">&#39;checked&#39;</span><span class="p">,</span> <span class="s1">&#39;checked&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>An Input handler for password fields. The user-entered password will never get
sent to the model, a bcrypt-encrypted hash will be sent instead. This helps
developers remember to never send unencrypted passwords across the line, and
is absolutely essential with tools like spine that auto-sync model data with
the server.
This handler isn't used by default, as it will alter the length of the
password that displays on the input field. This can be unexpected, especially
when there is a 'password confirmation' field.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Password</span> <span class="k">extends</span> <span class="nx">Input</span>
    <span class="nv">clean: </span><span class="nf">(value) -&gt;</span>
        <span class="nv">bcrypt = </span><span class="nx">require</span> <span class="s1">&#39;bcrypt&#39;</span>
        <span class="nv">salt = </span><span class="nx">bcrypt</span><span class="p">.</span><span class="nx">gen_salt_sync</span>
        <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">encrypt_sync</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">salt</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Used intertally to see if something is a handler class.
Guesses by duck-typing the prototype.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">isHandlerClass = </span><span class="nf">(fn) -&gt;</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span> <span class="nx">fn</span><span class="p">)</span> <span class="o">and</span>
           <span class="p">(</span><span class="nx">fn</span><span class="o">::</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="nx">fn</span><span class="o">::</span><span class="nx">constructor</span><span class="p">)</span> <span class="o">and</span>
           <span class="p">(</span><span class="nx">fn</span><span class="o">::</span><span class="nx">get</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="nx">fn</span><span class="o">::</span><span class="nx">set</span><span class="p">)</span> <span class="o">and</span>
           <span class="p">(</span><span class="nx">fn</span><span class="o">::</span><span class="nx">clean</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="nx">fn</span><span class="o">::</span><span class="nx">render</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>The Axon class preforms the binding between the element and the model.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Axon</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Axons take four options in the constructor:
<strong>selector</strong>, <strong>attribute</strong>, <strong>handler</strong>, and <strong>event</strong>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">constructor: </span><span class="nf">(options={}) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p><code>attribute</code> is inferred from <code>selector</code> at event time if absent</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">options</span><span class="p">.</span><span class="nx">attribute</span> <span class="k">then</span> <span class="vi">@attribute = </span><span class="nx">options</span><span class="p">.</span><span class="nx">attribute</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p><code>selector</code> is inferred immediately from <code>attribute</code> if absent</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">options</span><span class="p">.</span><span class="nx">selector</span> <span class="k">then</span> <span class="vi">@selector = </span><span class="nx">options</span><span class="p">.</span><span class="nx">selector</span>
        <span class="k">else</span> <span class="vi">@selector = </span><span class="nx">@selector</span> <span class="nx">@attribute</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Outside of an axon, the <em>this</em> selector means <em>link the view's <code>el</code></em>
Inside of an axon, a false selector means the same thing.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">@selector</span> <span class="o">is</span> <span class="s1">&#39;this&#39;</span> <span class="k">then</span> <span class="vi">@selector = </span><span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p><code>handler</code> is inferred from <code>myelin.handlerMap</code> at event time if absent.
If <code>handler</code> is a class, we instantiate it immediately.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">options</span><span class="p">.</span><span class="nx">handler</span> <span class="k">instanceof</span> <span class="nx">Handler</span> <span class="k">then</span> <span class="vi">@handler = </span><span class="nx">options</span><span class="p">.</span><span class="nx">handler</span>
        <span class="k">else</span> <span class="vi">@handler = </span><span class="k">new</span> <span class="nx">options</span><span class="p">.</span><span class="nx">handler</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>We override the handler's domEvent if asked nicely.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">options</span><span class="p">.</span><span class="nx">handler</span> <span class="o">and</span> <span class="nx">options</span><span class="p">.</span><span class="nx">event</span><span class="o">?</span>
            <span class="vi">@handler.domEvent = </span><span class="nx">options</span><span class="p">.</span><span class="nx">event</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>If only an event is given we save it for when we dynamically choose
a handler.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="k">if</span> <span class="nx">options</span><span class="p">.</span><span class="nx">event</span><span class="o">?</span> <span class="k">then</span> <span class="vi">@event = </span><span class="nx">options</span><span class="p">.</span><span class="nx">event</span>

        <span class="vi">@scope = @model = </span><span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>This selector function will never be present on an instantiated Axon.
If <code>selector</code> is ommited when declaring an Axon, this function will be
called immediately to determine the correct selector.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">selector: </span><span class="nf">(attribute) -&gt;</span> <span class="s2">&quot;[name=#{attribute}]&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Fallback model attribute. By default, uses the html 'name' attribute.
Called at event time. If the elements change their 'name' attribute
in between events, then the model attribute synced will change to match.
<code>el</code> will be jQuery wrapped.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">attribute: </span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">attr</span> <span class="s1">&#39;name&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Fallback handler finder. By default, uses myelin.handlerMap, and falls
back to myelin.defaultHandler.
Called at event time. If the elements change their type from, say,
checkbox to radio in between events then the handler will change to match.
<code>el</code> will be jQuery wrapped.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">handler: </span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="k">for</span> <span class="p">[</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">handler</span><span class="p">]</span> <span class="k">in</span> <span class="nx">myelin</span><span class="p">.</span><span class="nx">handlerMap</span>
            <span class="k">if</span> <span class="nx">el</span><span class="p">.</span><span class="o">is</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="k">then</span> <span class="k">return</span> <span class="k">new</span> <span class="nx">handler</span> <span class="p">{</span><span class="nx">@event</span><span class="p">}</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">myelin</span><span class="p">.</span><span class="nx">defaultHandler</span> <span class="p">{</span><span class="nx">@event</span><span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Dynamically selects the elements to be worked on. Can't be used until a
scope has been assigned.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">el: </span><span class="o">=&gt;</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span> <span class="s2">&quot;Axons can&#39;t use elements without scope&quot;</span> <span class="nx">unless</span> <span class="nx">@scope</span>
        <span class="k">if</span> <span class="nx">@selector</span> <span class="k">then</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@selector</span><span class="p">,</span> <span class="nx">@scope</span><span class="p">)</span> <span class="k">else</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@scope</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>True iff. the axon has both elements and a model to work with.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">ready: </span><span class="o">=&gt;</span> <span class="k">return</span> <span class="nx">@scope</span> <span class="o">and</span> <span class="nx">@model</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>A function to lazily get data that may or may not depend upon the elements
being synced to. For example, the model <code>attribute</code> may be a string or a
function that only resolves when we know the elements.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">lazy: </span><span class="p">(</span><span class="nx">attr</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span> <span class="k">this</span><span class="p">[</span><span class="nx">attr</span><span class="p">]</span> <span class="k">then</span> <span class="k">this</span><span class="p">[</span><span class="nx">attr</span><span class="p">](</span><span class="nx">@el</span><span class="p">())</span> <span class="k">else</span> <span class="k">this</span><span class="p">[</span><span class="nx">attr</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Assign a scope from which to select elements. This should be called with
a view's <code>el</code>. If the synapse already had a scope (i.e. if the view is
changing it's <code>el</code>) then the old events will be unbound.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">assignScope: </span><span class="p">(</span><span class="nx">scope</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="k">return</span> <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span> <span class="nx">@scope</span><span class="p">,</span> <span class="nx">scope</span>
        <span class="k">if</span> <span class="nx">@scope</span> <span class="k">then</span> <span class="nx">@unbindDom</span><span class="p">()</span>
        <span class="vi">@scope = </span><span class="nx">scope</span>
        <span class="k">if</span> <span class="nx">@scope</span> <span class="k">then</span> <span class="nx">@bindDom</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Assign a model to sync to. If the synapse already has a model (i.e. if the
view is switching models) then the old events will be unbound.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">assignModel: </span><span class="p">(</span><span class="nx">model</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="k">return</span> <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span> <span class="nx">@model</span><span class="p">,</span> <span class="nx">model</span>
        <span class="k">if</span> <span class="nx">@model</span> <span class="k">then</span> <span class="nx">@unbindModel</span><span class="p">()</span>
        <span class="vi">@model = </span><span class="nx">model</span>
        <span class="k">if</span> <span class="nx">@model</span> <span class="k">then</span> <span class="nx">@bindModel</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Update the document with the model's current data. Required any time a
view changes model or el; updates only happen automatically on events.
If <code>modelEvent</code> is falsy, no changes will be made, because the model does
not push to the document.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">push: </span><span class="o">=&gt;</span>
        <span class="k">return</span> <span class="nx">unless</span> <span class="nx">@ready</span><span class="p">()</span> <span class="o">and</span> <span class="nx">@modelEvent</span><span class="p">()</span>
        <span class="nv">value = </span><span class="nx">@model</span><span class="p">.</span><span class="nx">get</span> <span class="nx">@lazy</span><span class="p">(</span><span class="s1">&#39;attribute&#39;</span><span class="p">)</span>
        <span class="nv">handler = </span><span class="nx">@lazy</span><span class="p">(</span><span class="s1">&#39;handler&#39;</span><span class="p">)</span>
        <span class="nx">handler</span><span class="p">.</span><span class="nx">set</span> <span class="nx">@el</span><span class="p">(),</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">render</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Gets the domEvent from the handler and resolves it if necessary
handler.domEvent is either a value or a function that takes the elements
being linked.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">domEvent: </span><span class="o">=&gt;</span>
        <span class="nv">event = </span><span class="nx">@lazy</span><span class="p">(</span><span class="s1">&#39;handler&#39;</span><span class="p">).</span><span class="nx">domEvent</span>
        <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span> <span class="nx">event</span> <span class="k">then</span> <span class="nx">event</span> <span class="nx">@el</span><span class="p">()</span> <span class="k">else</span> <span class="nx">event</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Gets the modelEvent from the handler and resolves it if necessary
handler.modelEvent is either a value or a function that takes the
attribute being linked.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">modelEvent: </span><span class="o">=&gt;</span>
        <span class="nv">event = </span><span class="nx">@lazy</span><span class="p">(</span><span class="s1">&#39;handler&#39;</span><span class="p">).</span><span class="nx">modelEvent</span>
        <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span> <span class="nx">event</span> <span class="k">then</span> <span class="nx">event</span> <span class="nx">@lazy</span><span class="p">(</span><span class="s1">&#39;attribute&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="nx">event</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>Sets all the DOM-side events</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">bindDom: </span><span class="p">(</span><span class="nx">bind</span><span class="o">=</span><span class="s1">&#39;bind&#39;</span><span class="p">,</span> <span class="nx">delegate</span><span class="o">=</span><span class="s1">&#39;delegate&#39;</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nv">event = </span><span class="nx">@domEvent</span><span class="p">()</span>
        <span class="k">return</span> <span class="nx">unless</span> <span class="nx">event</span>
        <span class="k">if</span> <span class="nx">@selector</span> <span class="k">then</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@scope</span><span class="p">)[</span><span class="nx">delegate</span><span class="p">](</span><span class="nx">@selector</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">@domChange</span><span class="p">)</span>
        <span class="k">else</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@scope</span><span class="p">)[</span><span class="nx">bind</span><span class="p">](</span><span class="nx">event</span><span class="p">,</span> <span class="nx">@domChange</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Sets all the model-side events</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">bindModel: </span><span class="p">(</span><span class="nx">bind</span><span class="o">=</span><span class="s1">&#39;bind&#39;</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nv">event = </span><span class="nx">@modelEvent</span><span class="p">()</span>
        <span class="k">return</span> <span class="nx">unless</span> <span class="nx">event</span>
        <span class="nx">@model</span><span class="p">[</span><span class="nx">bind</span><span class="p">]</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">@modelChange</span></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>Unbinds DOM-side events</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">unbindDom: </span><span class="o">=&gt;</span> <span class="nx">@bindDom</span> <span class="s1">&#39;unbind&#39;</span><span class="p">,</span> <span class="s1">&#39;undelegate&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Unbinds model-side events</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">unbindModel: </span><span class="o">=&gt;</span> <span class="nx">@bindModel</span> <span class="s1">&#39;unbind&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <p>Called when DOM elements change. Cleans the data and sets it on the model.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">domChange: </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="k">return</span> <span class="nx">unless</span> <span class="nx">@model</span>
        <span class="nv">el = </span><span class="nx">$</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span>
        <span class="nv">handler = </span><span class="nx">@lazy</span> <span class="s1">&#39;handler&#39;</span>
        <span class="nv">value = </span><span class="nx">handler</span><span class="p">.</span><span class="nx">clean</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">get</span> <span class="nx">el</span>
        <span class="nv">data = </span><span class="p">{}</span>
        <span class="nx">data</span><span class="p">[</span><span class="nx">@lazy</span> <span class="s1">&#39;attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
        <span class="nx">@model</span><span class="p">.</span><span class="nx">set</span> <span class="nx">data</span>
        <span class="k">if</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="k">then</span> <span class="k">return</span> <span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p>Called when the model changes. Renders the data and sets it on the DOM.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">modelChange: </span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="k">return</span> <span class="nx">unless</span> <span class="nx">@scope</span>
        <span class="nv">handler = </span><span class="nx">@lazy</span> <span class="s1">&#39;handler&#39;</span>
        <span class="nx">handler</span><span class="p">.</span><span class="nx">set</span> <span class="nx">@el</span><span class="p">(),</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">render</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <p>An internal class to parse the user sync settings into an array of Axons</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Parser</span>
    <span class="nv">constructor: </span><span class="nf">(@view) -&gt;</span> <span class="vi">@axons = </span><span class="p">[]</span></pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>Break a selector into the event componet (if any) and the selector.
Recognized events are white-listed in myelin.events.
Events with classes (i.e. keyup.MyEvent1.MyEvent2) are also recognized.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">normalize: </span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="k">if</span> <span class="nx">selector</span> <span class="k">in</span> <span class="nx">myelin</span><span class="p">.</span><span class="nx">events</span>
            <span class="k">return</span> <span class="nv">event: </span><span class="nx">selector</span><span class="p">,</span> <span class="nv">selector: </span><span class="kc">false</span>
        <span class="nv">eventRegex = </span><span class="nb">RegExp</span> <span class="s2">&quot;^((?:#{myelin.events.join(&#39;|&#39;)})(?:\\.\\S+)*)\\s+(.*)&quot;</span>
        <span class="nv">match = </span><span class="nx">selector</span><span class="p">.</span><span class="nx">match</span> <span class="nx">eventRegex</span>
        <span class="k">if</span> <span class="nx">match</span> <span class="k">then</span> <span class="nv">selector: </span><span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nv">event: </span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span> <span class="nv">selector: </span><span class="nx">selector</span></pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <p>Parse any form of user-entered sync settings.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">parse: </span><span class="p">(</span><span class="nx">sync</span><span class="p">)</span> <span class="o">=&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <p>Unroll arrays</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span> <span class="nx">sync</span> <span class="k">then</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span> <span class="nx">sync</span><span class="p">,</span> <span class="nx">@parse</span></pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-55">&#182;</a>               </div>               <p>Axon instances are already done</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="k">if</span> <span class="nx">sync</span> <span class="k">instanceof</span> <span class="nx">Axon</span> <span class="k">then</span> <span class="nx">@axons</span><span class="p">.</span><span class="nx">push</span> <span class="nx">sync</span></pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-56">&#182;</a>               </div>               <p>Resolve functions with the view as their context</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span> <span class="nx">sync</span> <span class="k">then</span> <span class="nx">@parse</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@view</span></pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-57">&#182;</a>               </div>               <p>If they gave us just <code>string</code>, interpret it as a {string: true}</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isString</span> <span class="nx">sync</span> <span class="k">then</span> <span class="nx">@parsePair</span> <span class="nx">sync</span><span class="p">,</span> <span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-58">&#182;</a>               </div>               <p>If they gave an object, parse each key-value pair</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="nx">@parsePair</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">sync</span>
        <span class="k">return</span> <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-59">&#182;</a>               </div>               <p>Parse a {attribute: selector or handler} pair into a Synapse.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">parsePair: </span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">option</span><span class="p">)</span> <span class="o">=&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-60">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-60">&#182;</a>               </div>               <p>Helper to make a new Axon with attribute: attr</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">make = </span><span class="p">(</span><span class="nx">options</span><span class="o">=</span><span class="p">{})</span> <span class="o">=&gt;</span>
            <span class="nx">options</span><span class="p">.</span><span class="nx">attribute</span> <span class="o">or=</span> <span class="nx">attr</span>
            <span class="nx">@axons</span><span class="p">.</span><span class="nx">push</span> <span class="k">new</span> <span class="nx">myelin</span><span class="p">.</span><span class="nx">axon</span> <span class="nx">options</span></pre></div>             </td>           </tr>                               <tr id="section-61">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-61">&#182;</a>               </div>               <p>A falsy <code>option</code> means 'ignore this attribute'.
Allows resolved functions to say 'never mind'.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="o">not</span> <span class="nx">option</span><span class="p">)</span> <span class="k">then</span> <span class="k">return</span></pre></div>             </td>           </tr>                               <tr id="section-62">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-62">&#182;</a>               </div>               <p>{attr: true} means 'make an axon with no selector'</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="k">if</span> <span class="nx">option</span> <span class="o">is</span> <span class="kc">true</span> <span class="k">then</span> <span class="nx">make</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-63">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-63">&#182;</a>               </div>               <p>Given an array of selectors, make a link for each one.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span> <span class="nx">option</span> <span class="k">then</span> <span class="nx">@parsePair</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">o</span><span class="p">)</span> <span class="k">for</span> <span class="nx">o</span> <span class="k">in</span> <span class="nx">option</span></pre></div>             </td>           </tr>                               <tr id="section-64">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-64">&#182;</a>               </div>               <p>Given a handler class, we instantiate it and use it</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="k">if</span> <span class="nx">isHandlerClass</span> <span class="nx">option</span> <span class="k">then</span> <span class="nx">make</span> <span class="nv">handler: </span><span class="nx">option</span>
        <span class="k">else</span> <span class="k">if</span> <span class="nx">option</span> <span class="k">instanceof</span> <span class="nx">Handler</span> <span class="k">then</span> <span class="nx">make</span> <span class="nv">handler: </span><span class="nx">option</span>
        <span class="k">else</span> <span class="k">if</span> <span class="nx">option</span> <span class="k">instanceof</span> <span class="nx">Axon</span>
            <span class="nv">option.attribute = </span><span class="nx">attr</span>
            <span class="nx">@axons</span><span class="p">.</span><span class="nx">push</span> <span class="nx">option</span></pre></div>             </td>           </tr>                               <tr id="section-65">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-65">&#182;</a>               </div>               <p>If <code>option</code> is a non-axon function, resolve it with the view as the
context and the selector as an argument.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span> <span class="nx">option</span>
            <span class="nx">@parsePair</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">option</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@view</span><span class="p">,</span> <span class="nx">attr</span></pre></div>             </td>           </tr>                               <tr id="section-66">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-66">&#182;</a>               </div>               <p>If <code>option</code> is a selector, make sure to split off any event first</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isString</span> <span class="nx">option</span> <span class="k">then</span> <span class="nx">make</span> <span class="nx">@normalize</span> <span class="nx">option</span></pre></div>             </td>           </tr>                               <tr id="section-67">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-67">&#182;</a>               </div>               <p>Otherwise try passing the arguments to axon</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span> <span class="nx">option</span> <span class="k">then</span> <span class="nx">make</span> <span class="nx">option</span></pre></div>             </td>           </tr>                               <tr id="section-68">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-68">&#182;</a>               </div>               <p>Complain if the attr wasn't valid.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span> <span class="s2">&quot;Unrecognized sync option for #{attr}: #{option}&quot;</span>
        <span class="k">return</span> <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-69">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-69">&#182;</a>               </div>               <p>The myelin view. Makes axons based on the <code>sync</code> field in order to sync
between the DOM and models. <code>sync</code> can be a number of types. See README.md
for more details.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">View</span> <span class="k">extends</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span>
    <span class="nv">constructor: </span><span class="nf">(options) -&gt;</span>
        <span class="k">if</span> <span class="nx">options</span><span class="p">.</span><span class="nx">model</span> <span class="k">then</span> <span class="vi">@model = </span><span class="nx">options</span><span class="p">.</span><span class="nx">model</span>
        <span class="k">super</span>
        <span class="nx">@link</span><span class="p">()</span>

    <span class="nv">link: </span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="vi">@axons = </span><span class="p">(</span><span class="k">new</span> <span class="nx">Parser</span><span class="p">).</span><span class="nx">parse</span><span class="p">(</span><span class="nx">@sync</span><span class="p">).</span><span class="nx">axons</span>
        <span class="vi">@model = </span><span class="nx">options</span><span class="o">?</span><span class="p">.</span><span class="nx">model</span> <span class="o">or</span> <span class="nx">@model</span>
        <span class="vi">@el = </span><span class="nx">options</span><span class="o">?</span><span class="p">.</span><span class="nx">el</span> <span class="o">or</span> <span class="nx">@el</span>
        <span class="k">for</span> <span class="nx">axon</span> <span class="k">in</span> <span class="nx">@axons</span>
            <span class="k">if</span> <span class="nx">@el</span> <span class="k">then</span> <span class="nx">axon</span><span class="p">.</span><span class="nx">assignScope</span><span class="p">(</span><span class="nx">@el</span><span class="p">)</span>
            <span class="k">if</span> <span class="nx">@model</span> <span class="k">then</span> <span class="nx">axon</span><span class="p">.</span><span class="nx">assignModel</span><span class="p">(</span><span class="nx">@model</span><span class="p">)</span>
            <span class="nx">axon</span><span class="p">.</span><span class="nx">push</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-70">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-70">&#182;</a>               </div>               <p>A list used to intelligently match handlers to elements.
Each element in myelin.handlerMap should be a [selector, handler] two-tuple.
If an element matches <code>selector</code> (using .is()) then <code>handler</code> will be used for
that element. Order matters; the first match is used.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">myelin.handlerMap = </span><span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;input:submit,button:submit&#39;</span><span class="p">,</span> <span class="nx">Submit</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;button,input:button&#39;</span><span class="p">,</span> <span class="nx">Button</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;input:checkbox&#39;</span><span class="p">,</span> <span class="nx">Checkbox</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;input:radio&#39;</span><span class="p">,</span> <span class="nx">Radio</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;textarea&#39;</span><span class="p">,</span> <span class="nx">ImmediateInput</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;select,input&#39;</span><span class="p">,</span> <span class="nx">Input</span><span class="p">]</span>
<span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-71">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-71">&#182;</a>               </div>               <p>The default handler to be used when no suitable handler can be found.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">myelin.defaultHandler = </span><span class="nx">Handler</span></pre></div>             </td>           </tr>                               <tr id="section-72">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-72">&#182;</a>               </div>               <p>Expose the handlers</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">handlers = </span><span class="p">{</span><span class="nx">Handler</span><span class="p">,</span> <span class="nx">Input</span><span class="p">,</span> <span class="nx">Button</span><span class="p">,</span> <span class="nx">Submit</span><span class="p">,</span> <span class="nx">Checkbox</span><span class="p">,</span> <span class="nx">Radio</span><span class="p">,</span> <span class="nx">Password</span><span class="p">}</span>
<span class="nx">_</span><span class="p">.</span><span class="nx">extend</span> <span class="nx">myelin</span><span class="p">,</span> <span class="nx">handlers</span></pre></div>             </td>           </tr>                               <tr id="section-73">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-73">&#182;</a>               </div>               <p>Expose the Axon class</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">myelin.Axon = </span><span class="nx">Axon</span></pre></div>             </td>           </tr>                               <tr id="section-74">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-74">&#182;</a>               </div>               <p>The default axon to be used for all bindings. If you subclass Axon and
want the default behavior to be changed, override myelin.axon as well.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">myelin.axon = </span><span class="nx">Axon</span></pre></div>             </td>           </tr>                               <tr id="section-75">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-75">&#182;</a>               </div>               <p>Expose myelin.View</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">myelin.View = </span><span class="nx">View</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 