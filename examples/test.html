<!doctype html>
<html>
    <head>
        <title>Myelin examples</title>
        <script type="text/javascript" src="./jquery.js"></script>
        <script type="text/javascript" src="./underscore.js"></script>
        <script type="text/javascript" src="./backbone.js"></script>
        <script type="text/javascript" src="./coffee-script.js"></script>
        <script type="text/coffeescript" src="./myelin.coffee"></script>
    </head>
    <body>

        <!-- test type-switching -->
        <!-- test model-switching -->
        <form id="example">
            <div>
                <input name="text">
                <span class="text"></span>
            </div>
            <div>
                <input name="checkbox" type="checkbox">
                <span class="checkbox"></span>
            </div>
            <div>
                <input name="radio" type="radio" value="one">
                <input name="radio" type="radio" value="two" checked>
                <input name="radio" type="radio" value="three">
                <span class="radio"></span>
            </div>
            <div>
                <button name="button" type="button">I am a button</button>
                <input name="button" value="CLICKY" type="button">
                <span class="button"></span>
            </div>
            <div>
                <input name="submit" type="submit" value="normally I submit things">
                <span class="submit"></span>
            </div>
            <div>
                <button name="fake" type="button">I'm fake.</button>
            </div>
            <div>
                <input name="immediate">
                <span class="immediate"></span>
            </div>
        </form>
        <script type="text/coffeescript">
            class Radio extends myelin.Radio
                clean: (value) =>
                    switch value
                        when "one" then 1
                        when "two" then 2
                        when "three" then 3
                render: (value) =>
                    switch value
                        when 1 then "one"
                        when 2 then "two"
                        when 3 then "three"

            class YesNo extends myelin.Handler
                render: (value) => if value then "yes" else "no"

            class View extends myelin.View
                el: '#example'
                sync: {
                    text: [true, '.text']
                    radio: [Radio, '.radio']
                    checkbox: [true, {handler: YesNo, selector: '.checkbox'}]
                    button: [true, '.button']
                    submit: [true, '.submit']
                    fake: [true, '.nonexistant']
                    immediate: ['keyup', '.immediate']
                }

            @view = new View model: new Backbone.Model
                text: "Welcome!"
                radio: 1
        </script>

        <input id="example2" name="ex2">
        <script type="text/coffeescript">
            model = new Backbone.Model
                ex2: "initial"

            class View2 extends myelin.View
                el: '#example2'
                sync: {ex2: 'keyup this'}

            @view2 = new View2 model: new Backbone.Model
                ex2: "initial"
        </script>

    </body>
</html>
