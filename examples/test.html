<!doctype html>
<html>
    <head>
        <title>Myelin examples</title>
        <script type="text/javascript" src="./jquery.js"></script>
        <script type="text/javascript" src="./underscore.js"></script>
        <script type="text/javascript" src="./backbone.js"></script>
        <script type="text/javascript" src="./coffee-script.js"></script>
        <script type="text/coffeescript" src="./myelin.coffee"></script>
    </head>
    <body>

        <form id="example">
            <div>
                <input name="text">
                <span class="text"></span>
            </div>
            <div>
                <input name="checkbox" type="checkbox">
                <span class="checkbox"></span>
            </div>
            <div>
                <input name="radio" type="radio" value="one">
                <input name="radio" type="radio" value="two" checked>
            </div>
            <div>
                <input name="radio" type="radio" value="three">
                <span class="radio"></span>
            </div>
            <div>
                <button name="button" type="button">I am a button</button>
                <input name="button" value="CLICKY" type="button">
                <span class="button"></span>
            </div>
            <div>
                <button name="fake" type="button">I'm fake.</button>
            </div>
        </form>
        <script type="text/coffeescript">
            class YesNo extends myelin.Axon
                render: (value) => if value then "yes" else "no"
                undefine: (el) => @set el, @render false

            class Radio extends myelin.Radio
                clean: (value) =>
                    switch value
                        when "one" then 1
                        when "two" then 2
                        when "three" then 3
                render: (value) =>
                    switch value
                        when 1 then "one"
                        when 2 then "two"
                        when 3 then "three"

            class OneWayButton extends myelin.Button
                watchModel: false

            model = new Backbone.Model
                text: "Hello there!"
                radio: 1

            class View extends myelin.View
                el: '#example'
                sync: {
                    text: [true, '.text']
                    radio: [Radio, '.radio']
                    checkbox: [true, new YesNo '.checkbox']
                    button: [OneWayButton, '.button']
                    fake: [true, '.nonexistant']
                }
                initialize: @model = new Backbone.Model
                    text: "Welcome!"
                    radio: 1

            @view = new View
        </script>

    </body>
</html>
